<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta charset="utf-8">
<title>math</title>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/normalize/2.1.3/normalize.min.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Inconsolata:400,700&amp;subset=latin,latin-ext">
<link rel="stylesheet" href="assets/css/style.css">
<!--[if lt IE 9]>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
<![endif]-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/2.3.0/knockout-min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/knockout.mapping/2.3.5/knockout.mapping.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/mathjs/0.18.0/math.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.3.13/d3.min.js"></script>
<script src="assets/js/math.js"></script>
<script>
	$(document).ready(function(){
		$('#calc').submit(function(e){
			e.preventDefault();
			var distr=[],
				p=parseFloat($('#p').val(),10),
				n=parseInt($('#n').val(),10);
			for(var i=0; i<n; i++){
				distr.push({k:i,p:Math.p.d.binomial.cdf(p,n,i)});
			}
			console.log(Math.round(Math.p.m.skewness(Math.p.d.binomial.mgf(p,n),0)*100)/100);
			$el=$('<div/>').addClass('result').html(
				'<h1>PMF<small>(n=<em>'+n+'</em>, p=<em>'+p+'</em>)</small></h1><pre>'+Math.h.arr_dump(distr,'p')+'</pre>'
			);
			$('.container').append($el.hide().fadeIn(500));
			/*var margin = {
				top: 20,
				right: 20,
				bottom: 30,
				left: 50
			},
			width = 960 - margin.left - margin.right,
			height = 500 - margin.top - margin.bottom;

			var x = d3.scale.linear()
					.range([0, width]);

			var y = d3.scale.linear()
					.range([height, 0]);

			var xAxis = d3.svg.axis()
					.scale(x)
					.orient("bottom");

			var yAxis = d3.svg.axis()
					.scale(y)
					.orient("left");

			var area = d3.svg.area()
					.x(function(d) { return x(d.k); })
					.y0(height)
					.y1(function(d) { return y(d.p); });

			var svg = d3.select("body").append("svg")
					.attr("width", width + margin.left + margin.right)
					.attr("height", height + margin.top + margin.bottom)
				.append("g")
					.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

			d3.entries(distr, function(data) {

				x.domain(d3.extent(data, function(d) { return d.k; }));
				y.domain([0, d3.max(data, function(d) { return d.p; })]);

				svg.append("path")
						.datum(data)
						.attr("class", "area")
						.attr("d", area);

				svg.append("g")
						.attr("class", "x axis")
						.attr("transform", "translate(0," + height + ")")
						.call(xAxis);

				svg.append("g")
						.attr("class", "y axis")
						.call(yAxis)
					.append("text")
						.attr("transform", "rotate(-90)")
						.attr("y", 6)
						.attr("dy", ".71em")
						.style("text-anchor", "end")
						.text("Price ($)");
			});*/
		});
	});
</script>
<style>
	.axis path, .axis line {
		fill: none;
		stroke: #000;
		shape-rendering: crispEdges;
	}
	.area {
		fill: steelblue;
	}
</style>

</head>
<body>
<div class="container">
	<form id="calc">
		<label>Probability: </label><input type="number" min="0" max="1" step="0.05" value="0.5" id="p"/>
		<label>Trials: </label><input type="number" min="0" max="170" step="1" value="40" id="n"/>
		<input type="submit" value="Calculate">
	</form>
	<div id="graph"></div>
</div>
</body>
</html>